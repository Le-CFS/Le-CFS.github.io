<style>
.sidenav {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #F8F8F8;
  overflow-x: hidden;
  transition: 0.5s;
  padding-top: 20px;
  text-align:left;
}

.sidenav a {
  padding: 8px 8px 8px 16px;
  text-decoration: none;
  font-size: 14px;
  color: #444;
  display: block;
  transition: 0.3s;

}

.sidenav .closebtn {
  float: right;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
}

.fa-plus {
  float: right;
  padding-right: 8px;
}

.nav-link[data-toggle].collapsed:after {
    float: right;
    content: " ▾";
}
.nav-link[data-toggle]:not(.collapsed):after {
    float: right;
    content: " ▴";
}

.nav-link-toggle:not(.collapsed) {
    color: #4da5e2;
    font-weight: bold;
}

</style>

{% assign mycfs = site.data.accueil.mycfs %}
{% assign inscription = site.data.accueil.inscription %}
{% assign menu_principal = site.data.menu %}

<!-- 
    VERSION ORDINATEUR
-->
<!--  Boutons inscription et mycfs -->
<div class="desktop top-menu top-menu-inverse">
      <div class="row">
        <div class="col-md-4 offset-md-2">
          <a href="{{ mycfs.href }}" class="btn btn-block btn-info-filled" style="margin-top: 15px; color: #fff !important;" {% if mycfs.autre_page %}target="_blank"{% endif %}><i class="{{ mycfs.icone }}"></i> {{ mycfs.texte_ordi }}</a>
        </div>
        <div class="col-md-4">
          <a href="{{ inscription.href }}" class="btn btn-block btn-info-filled" style="margin-top: 15px; color: #fff !important;" {% if inscription.autre_page %}target="_blank"{% endif %}><i class="{{ inscription.icone }}"></i> {{ inscription.texte_ordi }}</a>
        </div>
      </div>
</div>

<!-- Menu principal -->
<div class="desktop">
<nav class="navbar navbar-toggleable-sm navbar-light bg-default">
  <div class="container">
    <a class="navbar-brand" href="/"><img src="{{ BASE_PATH }}/assets/images/logo.png" alt=""></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fa fa-bars"></i>
    </button>
    <div class="navbar-collapse justify-content-center">
      <ul class="navbar-nav">
        {% for section in menu_principal %}
        <li class="nav-item">
            <a class="nav-link" href='{{ section[1]["url"] }}'>{{ section[1]["titre"] }}</a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</nav>
</div>

<!-- 
    VERSION MOBILE
-->

<div class="mobile">
<div class="top-menu-inverse fixed-top">
  <div class="row">
    <div class="col-xs-4">
      <button class="navbar-toggler" onclick="openNav()" style="margin-top: 5px; margin-right: 10px; float: right;"><i class="fa fa-bars"></i> Menu</button>
    </div>
    <div class="col-xs-4">
      
    </div>
    <div class="col-xs-4 text-center">
      <a href="/"><img src="{{ BASE_PATH }}/assets/images/logo.png" alt="" style="width: 60%;"></a>
    </div>
    
  </div>
</div>
</div>

<div class="mobile top-menu-inverse fixed-bottom">
  <div class="row">
    <div class="col-xs-5 text-center">
      <a href="{{ mycfs.href }}" class="btn btn-info-filled" style="margin: 5px; margin-left: 10%; color: #fff !important; width: 80%; padding-left: 0px; padding-right: 0px;" {% if mycfs.autre_page %}target="_blank"{% endif %}><i class="{{ mycfs.icone }}"></i> {{ mycfs.texte_mobile }}</a>
    </div>
    <div class="col-xs-5 text-center">
      <a href="{{ inscription.href }}" class="btn btn-info-filled" style="margin: 5px; color: #fff !important; margin-right: 10%; width: 80%; padding-left: 0px; padding-right: 0px;" {% if inscription.autre_page %}target="_blank"{% endif %}><i class="{{ inscription.icone }}"></i> {{ inscription.texte_mobile }}</a>
    </div>
    <div class="col-xs-2 text-center">
      <a href="#top"><i class="fa fa-arrow-circle-up" style="font-size: 50px;margin-right: 30px" ></i></a>
    </div>
  </div>
</div>

<div id="mySidenav" class="sidenav" id="sidebar">
  <a href="javascript:void(0)" class="closebtn" style="float: right !important; padding-top: 25px;" onclick="closeNav()"><i class="fa fa-times"></i></a>
  <ul class="flex-column flex-nowrap overflow-hidden" style="padding-top: 35px; padding-bottom: 55px;">
    <!-- Compteur pour pouvoir gérer les id du menu1 -->
    {% assign menu1_index = 1 %}
    <!-- menu1 = menu principal -->
    {% for menu1 in menu_principal %}
    <!-- Si le menu principal a un sous menu -->
    {% if menu1[1]["sousmenu"] %}
    <li class="nav-item">
        <a class="nav-link nav-link-toggle collapsed" href="#submenu{{menu1_index}}" data-toggle="collapse" data-target="#submenu{{menu1_index}}"> {{ menu1[1]["titre"] }}</a>
        <div class="collapse" id="submenu{{menu1_index}}" aria-expanded="false">
            <ul class="flex-column pl-2 nav">
              <!-- Comme les menus n'ont pas de menu déroulant, on doit afficher la page du menu principal-->
              <li class="nav-item"><b><a class="nav-link" href='{{ menu1[1]["url"] }}' style=""> {{ menu1[1]["title_mobile"] }}</a></b></li>
              <!-- Compteur pour pouvoir gérer les id du menu2 -->
              {% assign menu2_index = 1 %}
              {% for menu2 in menu1[1]["sousmenu"] %}
              <!-- Si le menu 2 a un sous menu -->
                {% if menu2.sousmenu %}
                <li class="nav-item">
                    <a class="nav-link nav-link-toggle collapsed" href="#submenu{{menu1_index}}sub{{menu2_index}}" data-toggle="collapse" data-target="#submenu{{menu1_index}}sub{{menu2_index}}"> {{ menu2.title }}</a>
                    <div class="collapse" id="submenu{{menu1_index}}sub{{menu2_index}}" aria-expanded="false">
                        <ul class="flex-column nav pl-4">
                          <!-- Comme les menus n'ont pas de menu déroulant, on doit afficher la page du menu principal-->
                          <li class="nav-item"><b><a class="nav-link py-0" href="{{ menu2.url }}" style="">{{ menu2.title_mobile }}</a></b></li>
                          {% for menu3 in menu2.sousmenu %}
                            <li class="nav-item">
                                <a class="nav-link p-1" href="{{ menu3.url }}" style=""> {% if menu3.title_mobile %}{{ menu3.title_mobile }}{% else %}{{ menu3.title }}{% endif %}</a>
                            </li>
                          {% endfor %}
                        </ul>
                    </div>
                </li>
                {% else %}
                <li class="nav-item"><a class="nav-link py-0" href="{{ menu2.url }}" style="">{{ menu2.title }}</a></li>
                {% endif %}
                {% assign menu2_index = menu2_index | plus: 1 %}
              {% endfor %}
            </ul>
        </div>
    </li>
    {% else %}
    <li class="nav-item"><a class="nav-link" href='{{ menu1[1]["url"] }}' style=""> {{ menu1[1]["titre"] }}</a></li>
    {% endif %}
    {% assign menu1_index = menu1_index | plus: 1 %}
    {% endfor %}
  </ul>
</div>

<script>
function openNav() {
  document.getElementById("mySidenav").style.width = "80%";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}
</script>